USE COMERCIO;

-- ALTER TABLE >> CHANGE COLUMN

DESCRIBE PRUEBA2;

ALTER TABLE PRUEBA2
CHANGE COLUMN NOMBRE NOMBRE VARCHAR (30) NOT NULL;

-- ALTER TABLE >> DROP COLUMN 

ALTER TABLE PRUEBA2
DROP COLUMN APELLIDO;


-------------------------------------------------------------------

-- DROP TABLE 
DROP TABLE PRUEBA2;
SHOW TABLES;

-------------------------------------------------------------------
INSERT INTO PRUEBA  (ID, NOMBRE, F_INGRESO, ACTIVO)
VALUES (1,'PEPE', '2025-01-01','S');

INSERT INTO PRUEBA  
VALUES (2,'CARLOS', '2025-03-25','S');

SELECT * FROM PRUEBA;

-------------------------------
-- INSERTAR FATOS EN LOS CAMPOS (NOMBRE Y  ID)
INSERT INTO PRUEBA  (NOMBRE, ID)
VALUES ('GUSTAVO', 20);

-- INSERTAR FATOS EN LOS CAMPOS (ID, NOMBRE, FECHA DE INGRESO)

INSERT INTO PRUEBA  (ID, NOMBRE, F_INGRESO)
VALUES (15, 'JAIME','2025-02-25'),
       (25, 'AGUSTIN','2025-02-25');
       
INSERT INTO PRUEBA  (ID, NOMBRE)
VALUES (30, 'JUAN BAUTISTA');
       
SELECT *FROM PRUEBA;

-- SENTENCIAS DDL >> DATA DEFINITION LANG
-- SENTENCIAS DML >> DATA MANIPULATION

-- INSER *** SELECT
INSERT INTO PRUEBA (ID,NOMBRE, F_INGRESO, ACTIVO)
SELECT
ID_CLIENTE +30 AS ID,
LEFT (CONCAT (NOMBRE, ' ', APELLIDO),20)AS NOMBRE,
NOW() AS F_INGRESO,
'S' AS ACTIVO
FROM CLIENTES;

SELECT * FROM PRUEBA;

/* 
METODO DE 3 PASOS PARA HACE RUN UPDATE SEGURO 
1) EJECUTAR UN SELECET USANDO EL WHERE DEL UPDATE
2) USAR ELUPDATE EN UN TRANSACCION ROLLBACK
3) EJECUTAR EL UPDATE  DEFINITIVO
*/

-- PASO 1
SELECT * FROM PRUEBA WHERE ID=1;

-- PASO 2
-- SETENCIAS DDL NO SE PUEDE APLICAR EL ROLLBACK * IMPORTANTE*
BEGIN;
	UPDATE PRUEBA
	SET NOMBRE= 'PEPITO'
	WHERE ID=1;
	SELECT * FROM PRUEBA WHERE ID=1;
ROLLBACK;

/* 
PARA EJECUTAR ESTE BLOQUE DE CODIGO SE USA LA CONVINACION 

SOMBRENADO EL GRUPO O BLOQUE DE INSTRUCCIONES
 CONTOL+SHIFT+ENTER
 */
 
 -- PASO 3 EJECUTAR EL UPDATE
 
UPDATE PRUEBA
SET NOMBRE= 'PEPITO'
WHERE ID=1;


SELECT * FROM PRODUCTOS WHERE MARCA='LEVIS';

BEGIN;
	UPDATE PRODUCTOS
	SET PRECIO= PRECIO *1.1
	WHERE MARCA = 'LEVIS';
	SELECT * FROM PRODUCTOS WHERE MARCA='LEVIS';
ROLLBACK;

/*

SELECT: Permite acceder a los datos de una base de datos
INSERT: Permite introducir filas de datos dentro de una tabla existente
DELETE: Permite eliminar filas de datos dentro de una tabla existente
UPDATE: Permite modificar datos dentro de las filas de una tabla

*/
SELECT * FROM CLIENTES WHERE ID_CLIENTE=20;

BEGIN;
    DELETE FROM CLIENTES WHERE ID_CLIENTE = 20;
    SELECT * FROM CLIENTES WHERE ID_CLIENTE = 20;
ROLLBACK;

SELECT * FROM CLIENTES WHERE ID_CLIENTE=37;
BEGIN;
	INSERT INTO CLIENTES (ID_CLIENTE,NOMBRE,APELLIDO,DNI,CUIT, SEXO,DIRECCION,LOCALIDAD,TELEFONO,MAIL)
	VALUES (38,'CARLOS', 'GARRIDO', '95934718','20-95934718-3','M', 'NICARAGUA 4715', 'CAPITAL', 1176061780,'CGARRIDO670@GMAIL.COM');
	SELECT * FROM CLIENTES WHERE ID_CLIENTE=37;
ROLLBACK;


INSERT INTO CLIENTES (NOMBRE,APELLIDO,DNI,CUIT, SEXO,DIRECCION,LOCALIDAD,TELEFONO,MAIL)
VALUES ('CARLOS', 'GARRIDO', '95934718','20-95934718-3','M', 'NICARAGUA 4715', 'CAPITAL', 1176061780,'CGARRIDO670@GMAIL.COM');
SELECT * FROM CLIENTES;

BEGIN;
    DELETE FROM CLIENTES WHERE ID_CLIENTE = 37;
    SELECT * FROM CLIENTES WHERE ID_CLIENTE = 37;
ROLLBACK;
    DELETE FROM CLIENTES WHERE ID_CLIENTE = 37;
    
     SELECT * FROM CLIENTES;